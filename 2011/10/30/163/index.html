<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>GreenSQL - 数据库防火墙  | Pyinx Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="greensql,sql注入," />
  

  <meta name="description" content="关于GreenSQL
英文原文：http://www.greensql.net/about
翻译：Web应用安全观察站(WAS) http://blog.WebServerGuard.net/ 
&amp;nbsp;
什么是GreenSQL?
GreenSQL是一个开源的数据库防火墙（Database firewall），用来保护数据库免受SQL注入攻击。GreenSQL作为一个SQL命令代理来工作，并且">
<meta property="og:type" content="article">
<meta property="og:title" content="GreenSQL - 数据库防火墙 ">
<meta property="og:url" content="http://blog.itsir.org/2011/10/30/163/index.html">
<meta property="og:site_name" content="Pyinx Blog">
<meta property="og:description" content="关于GreenSQL
英文原文：http://www.greensql.net/about
翻译：Web应用安全观察站(WAS) http://blog.WebServerGuard.net/ 
&amp;nbsp;
什么是GreenSQL?
GreenSQL是一个开源的数据库防火墙（Database firewall），用来保护数据库免受SQL注入攻击。GreenSQL作为一个SQL命令代理来工作，并且">
<meta property="og:image" content="http://www.nosec.org/uploadfile/2009/0907/20090907114753845.jpg">
<meta property="og:updated_time" content="2015-08-06T02:38:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GreenSQL - 数据库防火墙 ">
<meta name="twitter:description" content="关于GreenSQL
英文原文：http://www.greensql.net/about
翻译：Web应用安全观察站(WAS) http://blog.WebServerGuard.net/ 
&amp;nbsp;
什么是GreenSQL?
GreenSQL是一个开源的数据库防火墙（Database firewall），用来保护数据库免受SQL注入攻击。GreenSQL作为一个SQL命令代理来工作，并且">
  
  

  


  <link rel="stylesheet" href="/css/styles.css" type="text/css">
  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</head>

<body>
  <div class="content-post">
  <a class="avatar" href="/archives">
    <img src="/images/avatar.jpg" alt="" />
  </a>
  <article id="post-163" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    <a class="post-title" href="/2011/10/30/163/">GreenSQL - 数据库防火墙 </a>

  </header>

  <div class="article-meta">
    <span>2011-10-30</span>

    <span> | </span>

    <span class="article-author">pyinx</span>

    <span> | </span>

    
  <span class="article-category">
    <a class="article-category-link" href="/categories/安全/">安全</a>
  </span>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>关于GreenSQL</strong></p>
<p>英文原文：<a href="http://www.greensql.net/about" target="_blank" rel="external">http://www.greensql.net/about</a></p>
<p>翻译：Web应用安全观察站(WAS) <a href="http://blog.webserverguard.net/" target="_blank" rel="external">http://blog.WebServerGuard.net/</a> </p>
<p>&nbsp;</p>
<p><strong>什么是GreenSQL?</strong></p>
<p>GreenSQL是一个开源的数据库防火墙（Database firewall），用来保护数据库免受SQL注入攻击。GreenSQL作为一个SQL命令代理来工作，并且内置对于MySQL的支持。其工作原理是基于SQL命令的评估，采用风险评分矩阵的模式进行工作，阻止已知的DBA命令（DROP、CREATE等等）。GreenSQL基于GPL协议进行分发。你可以在这里下载到GreenSQL: <a href="http://www.greensql.net/download" target="_blank" rel="external">www.GreenSQL.net/download</a> 。</p>
<p><strong>GreenSQL架构</strong></p>
<p>GreenSQL作为MySQL的反向代理来工作。这就意味着，其可以来代替MySQL服务器，你的应用程序可以连接到GreenSQL服务器来正常工作。GreenSQL会分析SQL查询并将它们转发到后端的MySQL服务器。</p>
<p>下图描述了整个处理过程。</p>
<p><a href="http://www.nosec.org/uploadfile/2009/0913/20090913063638988.jpg" target="_blank" rel="external"><img src="http://www.nosec.org/uploadfile/2009/0907/20090907114753845.jpg" alt="clip_image001" title="clip_image001"></a></p>
<p><strong>GreenSQL**</strong>架构**</p>
<p>正如你所看到的，GreenSQL调用真正的数据库服务器来执行SQL命令，而Web应用程序则连接到GreenSQL服务器，就好像GreenSQL服务器就是一个真实的数据库服务器那样。</p>
<p>GreenSQL可以安装到与数据库服务器所在的同一台机器上或者作为一个完全分开的服务器来安装。默认情况下，GreenSQL监听本地的127.0.0.1:3305端口，并将SQL查询转发到127.0.0.1：3306端口（默认的MySQL设置）。这个设定可以使用GreenSQL控制台程序来进行修改。</p>
<p><strong>支持模式</strong></p>
<p>GreenSQL数据库防火墙支持如下模式：</p>
<p>· 模拟模式(数据库入侵检测系统)</p>
<p>· 阻止可疑命令模式（数据库入侵防御系统）</p>
<p>· 学习模式</p>
<p>· 主动防御模式（数据库防火墙）</p>
<p>在模拟模式下，基本上不会阻止任何SQL命令。在这种模式下，GreenSQL扮演着数据库入侵检测系统的角色。在此模拟模式下，GreenSQL使用一个风险评分矩阵（Risk Scoring Matrix）引擎来发现可疑查询并使用GreenSQL管理控制台通知给DBA。</p>
<p>当系统配置为阻止可疑命令模式时，GreenSQL使用启发式引擎来发现不合法的查询并自动的阻止它们。这是一个典型的数据库入侵防御系统。如果查询被认为是非法的-白名单就被开启（译者：为了对比此非法查询是否在白名单内）。如果此查询在系统白名单内，它会被直接重定向到真实的MySQL服务器。如果是非法请求并且被发现不存在于白名单内，一个空的结果集将会被发送到调用方的应用程序。在此模式下，GreenSQL有时会出现错误的判定。其后果就是，一些合法查询被阻止或者一些非法的查询没有被检测出来。这也是赞成以及反对IPS系统的理由之一。我们将会坚持不懈的提升我们的启发式引擎，这将是一个循序渐进不断改进的过程。</p>
<p><em>英文原文：__<a href="http://www.greensql.net/about" target="_blank" rel="external">http://www.greensql.net/about</a> </em></p>
<p><em>翻译：<strong>Web</strong>应用安全观察站__(WAS) <a href="http://blog.webserverguard.net/" target="_blank" rel="external">http://blog.WebServerGuard.net/</a> </em></p>
<p>为了避免以上所提到的各种模式的缺点，我们建议启用学习模式并在学习过程完成后切换到主动防御模式。在学习模式下，所有的查询都会被自动的加入到白名单中。当学习模式结束时，GreenSQL会自动开启主动防御模式。如果主动防御模式被开启，所有未知的命令都会被阻止。这是典型的数据库防火墙模式。当一个未知SQL命令被检测到时，会将其自动阻止掉。另外，GreenSQL也会使用启发方法计算其风险并使用GreenSQL管理控制台显示出来。</p>
<p><strong>GreenSQL如何发现”非法”查询？</strong></p>
<p>GreenSQL使用如下方法发现可疑的查询：</p>
<p>· 查找管理员以及敏感SQL命令</p>
<p>· 计算查询风险分值</p>
<p><strong>查找管理员以及敏感**</strong>SQL<strong>**命令</strong></p>
<p>GreenSQL使用一个模式匹配引擎来查找被认为非法的SQL命令。从本质上而言，这是一种基于签名的子系统。例如，下面的命令会被认为是非法的：数据库管理员命令；试图更改数据库结构的命令；访问系统文件的命令。系统管理员同样可以将非法查询设定为合法的，通过将其加入到白名单或者更改保存非法模式判定的配置文件。</p>
<p><strong>计算查询风险分值</strong></p>
<p>对于每一个查询，GreenSQL都会计算其风险分值。本质上说，这是一个异常检测子系统。一旦风险分值计算出来后，GreenSQL会阻止这个查询或者仅仅创建一个警告消息（依赖于应用程序模式）。GreenSQL计算风险分值时候会使用很多的启发方法。例如：</p>
<p>· 访问敏感表将会增加风险分值（users,accounts,credit information）</p>
<p>· 在SQL命令中的注释将会增加查询风险</p>
<p>· 使用空白密码字符串</p>
<p>· 在查询中发现’or’关键字</p>
<p>· 发现SQL表达式始终为true（SQL tautology）</p>
<p>· 比较常数的数值(SQL tautology)</p>
<p>· …</p>
<p>为了发现异常，GreenSQL使用它自己的SQL语言解析器来发现SQL关键字。</p>
<p><strong>命令如何被阻止？</strong></p>
<p>当GreenSQL决定要阻止一个查询时，它会产生一个空结果集并将其发送回应用程序，因此将不会打断应用程序的执行。</p>
<p><strong>白名单如何工作的？</strong></p>
<p>每次GreenSQL判定一个SQL查询为一个安全风险时，此查询会被阻止掉。你可以将一个查询明确的加入到白名单中来更改这个操作行为。</p>
<p>新：在学习模式下，所有的新查询会自动被加入到白名单中。</p>
<p><strong>下载</strong></p>
<p>在此下载<a href="http://www.greensql.net/download" target="_blank" rel="external">www.GreenSQL.net/download</a>。请记住，GreenSQL是一个自由软件。它是开源的 J</p>
<p><em>英文原文：__<a href="http://www.greensql.net/about" target="_blank" rel="external">http://www.greensql.net/about</a></em></p>
<p><em>本文转自 ：<a href="http://www.nosec.org/2009/0907/19.html" target="_blank" rel="external">http://www.nosec.org/2009/0907/19.html</a></em></p>

      
    </div>

    
      

    

  </div>
</article>



<section class="disqus-comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>




</div>

  
<script>
  var disqus_shortname = 'pyinx';
  
  var disqus_url = 'http://blog.itsir.org/2011/10/30/163/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"undefined"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0]
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- 多说公共JS代码 end -->

</body>
</html>
